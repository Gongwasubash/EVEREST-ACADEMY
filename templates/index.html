{% extends "base.html" %}

{% block title %}Dashboard - School Management{% endblock %}

{% block content %}
<div class="school-dashboard">
    <!-- Top Header -->
    <div class="top-header">
        <div class="header-left">
            <h1>Top School Management System in India</h1>
            <div class="header-subtitle">
                <span>Digital School ERP Software | Ver: 23</span>
                <button class="update-btn">Check for Update</button>
            </div>
        </div>
        <div class="breadcrumb">
            Home / Dashboard
        </div>
    </div>

    <!-- Summary Stats -->
    <div class="summary-stats">
        <div class="stat-card students">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16,4C16,2.89 15.11,2 14,2H10C8.89,2 8,2.89 8,4H5C3.89,4 3,4.89 3,6V20C3,21.11 3.89,22 5,22H19C20.11,22 21,21.11 21,20V6C21,4.89 20.11,4 19,4H16M10,4H14V6H10V4Z"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">TOTAL STUDENTS</div>
                <div class="stat-value">{{ total_students }}</div>
            </div>
        </div>
        <div class="stat-card session">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">SESSION</div>
                <div class="stat-value">2025-26</div>
            </div>
        </div>
        <div class="stat-card birthday">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12,6A3,3 0 0,1 15,9A3,3 0 0,1 12,12A3,3 0 0,1 9,9A3,3 0 0,1 12,6M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">TODAY'S BIRTHDAY</div>
                <div class="stat-value">{{ todays_birthdays }}</div>
            </div>
        </div>
        <div class="stat-card enquiry">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4C22,2.89 21.1,2 20,2Z"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">PENDING ENQUIRY</div>
                <div class="stat-value">4</div>
            </div>
        </div>
        <div class="stat-card whatsapp">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.38 21.83 12.04 21.83C17.5 21.83 21.95 17.38 21.95 11.92C21.95 9.27 20.92 6.78 19.05 4.91C17.18 3.03 14.69 2 12.04 2M12.05 3.67C14.25 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.72 20.28 11.92C20.28 16.46 16.58 20.15 12.04 20.15C10.56 20.15 9.11 19.76 7.85 19L7.55 18.83L4.43 19.65L5.26 16.61L5.06 16.29C4.24 15 3.8 13.47 3.8 11.91C3.81 7.37 7.5 3.67 12.05 3.67M8.53 7.33C8.37 7.33 8.1 7.39 7.87 7.64C7.65 7.89 7 8.5 7 9.71C7 10.93 7.89 12.1 8 12.27C8.14 12.44 9.76 14.94 12.25 16C12.84 16.27 13.3 16.42 13.66 16.53C14.25 16.72 14.79 16.69 15.22 16.63C15.7 16.56 16.68 16.03 16.89 15.45C17.1 14.87 17.1 14.38 17.04 14.27C16.97 14.17 16.81 14.11 16.56 14C16.31 13.86 15.09 13.26 14.87 13.18C14.64 13.1 14.5 13.06 14.31 13.3C14.15 13.55 13.67 14.11 13.53 14.27C13.38 14.44 13.24 14.46 13 14.34C12.74 14.21 11.94 13.95 11 13.11C10.26 12.45 9.77 11.64 9.62 11.39C9.5 11.15 9.61 11 9.73 10.89C9.84 10.78 10 10.6 10.1 10.45C10.23 10.31 10.27 10.2 10.35 10.04C10.43 9.87 10.39 9.73 10.33 9.61C10.27 9.5 9.77 8.26 9.56 7.77C9.36 7.29 9.16 7.35 9 7.34C8.86 7.33 8.7 7.33 8.53 7.33Z"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">WA BAL.: 7232</div>
                <div class="stat-sublabel">WA BALANCE VALIDITY: 07 MAR 2026</div>
            </div>
        </div>
    </div>

    <!-- Main Content Grid -->
    <div class="main-grid">
        <div class="left-column">
            <!-- Today's Collection -->
            <div class="collection-card">
                <h3>Today's Collection</h3>
                <div class="collection-amount">
                    <span class="currency">Rs.</span>
                    <span class="amount">0</span>
                </div>
                <div class="collection-label">Total Collection</div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn" onclick="window.location.href='{% url 'students' %}'">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                    </svg>
                    New Admission
                </button>
                <button class="action-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                    </svg>
                    Fee By ID
                </button>
                <button class="action-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                    </svg>
                    Fee By Search
                </button>
                <button class="action-btn" onclick="window.location.href='{% url 'studentlist' %}'">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16,4C16,2.89 15.11,2 14,2H10C8.89,2 8,2.89 8,4H5C3.89,4 3,4.89 3,6V20C3,21.11 3.89,22 5,22H19C20.11,22 21,21.11 21,20V6C21,4.89 20.11,4 19,4H16M10,4H14V6H10V4Z"/>
                    </svg>
                    Student List
                </button>
                <button class="action-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                    </svg>
                    Student Detail
                </button>
                <button class="action-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.11,3 19,3M19,5V19H5V5H19Z"/>
                    </svg>
                    Fee Receipt Book
                </button>
                <button class="action-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                    </svg>
                    Fee Pending Report
                </button>
                <button class="action-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                    </svg>
                    Fee Payment Report
                </button>
            </div>
        </div>

        <div class="right-column">
            <!-- Total Students Chart -->
            <div class="student-chart-card">
                <h3>Total Student : {{ total_students }}</h3>
                <div class="chart-container" style="height: 300px; position: relative;">
                    <canvas id="studentChart"></canvas>
                    <div class="chart-center" style="position: absolute; top: 50%; left: 35%; transform: translate(-50%, -50%); text-align: center;">
                        <div class="center-label" style="font-size: 14px; color: #666;">Nursery</div>
                        <div class="center-value" style="font-size: 24px; font-weight: bold; color: #333;">25</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Row Charts -->
    <div class="bottom-charts">
        <div class="chart-card">
            <h3>Boys : {{ boys_count }} | Girls : {{ girls_count }}</h3>
            <div class="chart-placeholder">
                <canvas id="genderChart" width="150" height="150"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <h3>Religion Data</h3>
            <div class="chart-placeholder">
                <canvas id="religionChart" width="150" height="150"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <h3>Category Details</h3>
            <div class="chart-placeholder">
                <canvas id="categoryChart" width="150" height="150"></canvas>
            </div>
        </div>
    </div>
</div>
{% endblock %}